{% extends "base.html" %}
{% block title %}Login | Ride Express{% endblock %}
{% block content %}
<div class="form-container">
    <h2>Login to Ride Express</h2>
    {% if error %}
    <div class="error-message">{{ error }}</div>
    {% endif %}
    <form method="post">
        <label for="username">Username or Email</label>
        <input type="text" id="username" name="username" required>

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>

        <button type="submit" id="loginButton">
            <span id="buttonText">Login</span>
            <span id="loadingSpinner" class="spinner" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i>
            </span>
        </button>
    </form>
    <p style="text-align:center; margin-top: 18px; font-size: 0.98rem;">
        Don't have an account?
        <a href="{{ url_for('register') }}" class="text-blue-600 hover:underline">Register here</a>.
    </p>
</div>

<script>
    document.querySelector('form').addEventListener('submit', function() {
        const button = document.getElementById('loginButton');
        const buttonText = document.getElementById('buttonText');
        const spinner = document.getElementById('loadingSpinner');
        
        button.disabled = true;
        buttonText.style.display = 'none';
        spinner.style.display = 'inline-block';
    });
</script>

<style>
    .spinner {
        margin-left: 8px;
    }
    button[disabled] {
        opacity: 0.7;
        cursor: not-allowed;
    }
</style>
{% endblock %}